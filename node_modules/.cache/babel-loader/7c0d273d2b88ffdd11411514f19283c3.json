{"ast":null,"code":"import _objectSpread from \"/Users/ongyongen/Desktop/studyPal-local/studyPal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/ongyongen/Desktop/studyPal-local/studyPal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/ongyongen/Desktop/studyPal-local/studyPal/src/components/Forum/Forum.js\";\n\nimport React from 'react';\nimport Header from '../Header/Header.js';\nimport Title from '../Title/Title.js';\nimport Post from './Post.js';\nimport { NavLink } from 'react-router-dom';\nimport { useState, useEffect } from \"react\";\nimport { UserAuth } from '../../context/AuthContext';\nimport { db } from \"../../firebase.js\";\nimport { collection, query, onSnapshot, doc, updateDoc, deleteDoc, QuerySnapshot, orderBy, where } from \"firebase/firestore\";\nimport './Forum.css';\n\nvar Achievements = function Achievements() {\n  var _UserAuth = UserAuth(),\n      user = _UserAuth.user;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentPosts = _useState2[0],\n      setCurrentPosts = _useState2[1];\n\n  useEffect(function () {\n    var active = true;\n\n    if (active == true && user.uid != null) {\n      var q = query(collection(db, \"posts\"), orderBy('createdAt'));\n      console.log(\"Retrieving posts\");\n      var getAllPosts = onSnapshot(q, function (querySnapshot) {\n        var posts = [];\n        querySnapshot.forEach(function (doc) {\n          posts.push(_objectSpread({}, doc.data(), {\n            id: doc.id\n          }));\n          console.log(doc.data());\n        });\n        setCurrentPosts(function () {\n          return posts;\n        });\n      });\n      return function () {\n        active = false;\n      };\n    }\n  }, [user.uid]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Title, {\n    name: \"Forum\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"forum\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"forum-side-bar\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    className: \"nav-link-forum\",\n    to: \"/achievements/canvas\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 21\n    }\n  }, \"View Collaborative canvas\"), /*#__PURE__*/React.createElement(NavLink, {\n    className: \"nav-link-forum\",\n    to: \"/achievements/createpost\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }, \"Create Post\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"forum-post-feed\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, currentPosts.map(function (post) {\n    return /*#__PURE__*/React.createElement(Post, {\n      email: post['email'],\n      title: post['title'],\n      body: post['body'],\n      id: post['id'],\n      comments: post['comments'],\n      uid: post['uid'],\n      postID: post['postID'],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 25\n      }\n    });\n  }))));\n};\n\nexport default Achievements;","map":{"version":3,"names":["React","Header","Title","Post","NavLink","useState","useEffect","UserAuth","db","collection","query","onSnapshot","doc","updateDoc","deleteDoc","QuerySnapshot","orderBy","where","Achievements","user","currentPosts","setCurrentPosts","active","uid","q","console","log","getAllPosts","querySnapshot","posts","forEach","push","data","id","map","post"],"sources":["/Users/ongyongen/Desktop/studyPal-local/studyPal/src/components/Forum/Forum.js"],"sourcesContent":["import React from 'react'\nimport Header from '../Header/Header.js'\nimport Title from '../Title/Title.js'\nimport Post from './Post.js'\n\nimport { NavLink } from 'react-router-dom'\nimport { useState, useEffect } from \"react\"\n\nimport { UserAuth } from '../../context/AuthContext'\n\nimport {db} from \"../../firebase.js\"\nimport {\n    collection,\n    query,\n    onSnapshot,\n    doc,\n    updateDoc,\n    deleteDoc,\n    QuerySnapshot,\n    orderBy, \n    where\n  } from \"firebase/firestore\"\n\nimport './Forum.css'\n\nconst Achievements = () => {\n\n    const {user}  = UserAuth()\n\n    const[currentPosts, setCurrentPosts] = useState([])\n\n    useEffect(() => {\n        let active = true\n        if (active == true && user.uid != null) {\n            const q = query(collection(db, \"posts\"), orderBy('createdAt'))\n            console.log(\"Retrieving posts\")\n            const getAllPosts = onSnapshot(q, (querySnapshot) => {\n                let posts = []\n                querySnapshot.forEach((doc) => {\n                    posts.push({...doc.data(), id:doc.id})\n                    console.log(doc.data())\n                })\n                setCurrentPosts(() => posts)\n            })\n            return () => {active = false}}\n    }, [user.uid])\n        \n    return (\n        <div>\n            <Header />\n            <Title name={\"Forum\"} />\n            <div className=\"forum\">\n                <div className=\"forum-side-bar\">\n                    <NavLink \n                        className=\"nav-link-forum\"\n                        to='/achievements/canvas'>View Collaborative canvas\n                    </NavLink>\n                    <NavLink \n                        className=\"nav-link-forum\"\n                        to='/achievements/createpost'>Create Post\n                    </NavLink>\n                </div>\n                <div className=\"forum-post-feed\">\n                    {currentPosts.map((post) => (\n                        <Post \n                            email={post['email']}\n                            title={post['title']}\n                            body={post['body']}\n                            id={post['id']}\n                            comments={post['comments']}\n                            uid={post['uid']}\n                            postID={post['postID']}\n                        />\n                    ))}\n                </div>\n            </div> \n        </div>\n    )\n}\n\nexport default Achievements\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}